CREATE TABLE todos (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID NOT NULL,
  title VARCHAR(255) NOT NULL,
  status VARCHAR(255) NOT NULL DEFAULT 'pending',
  date DATE NOT NULL,
  FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE subtasks (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  todo_id UUID NOT NULL,  -- Foreign key referencing the 'id' in the 'todos' table
  title VARCHAR(255) NOT NULL,
  start_time TIME NOT NULL,
  end_time TIME NOT NULL,
  status VARCHAR(255) NOT NULL DEFAULT 'pending',
  FOREIGN KEY (todo_id) REFERENCES todos(id)
);


CREATE TABLE subtasks_list(
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  subtask_id UUID NOT NULL,
  description VARCHAR(255) NOT NULL,
  status VARCHAR(255) NOT NULL DEFAULT 'pending',
  FOREIGN KEY (subtask_id) REFERENCES subtasks(id)
);

DELETE FROM todos;
DROP TABLE todos;
SELECT * FROM todos;

DELETE FROM subtasks
DROP TABLE subtasks;
SELECT * FROM subtasks;


DELETE FROM subtasks_list
DROP TABLE subtasks_list;
SELECT * FROM subtasks_list;


ALTER TABLE subtasks
DROP COLUMN status;


ALTER TABLE subtasks
ADD COLUMN status VARCHAR(255) NOT NULL;

ALTER TABLE subtasks
ALTER COLUMN status SET DEFAULT 'pending';

ALTER TABLE subtasks
ADD COLUMN status VARCHAR(255) NOT NULL SET DEFAULT 'pending'; 

ALTER TABLE subtasks_list
ADD CONSTRAINT check_status CHECK (status IN ('pending', 'done'));



ALTER TABLE subtasks
ALTER COLUMN start_time TIME NOTNULL